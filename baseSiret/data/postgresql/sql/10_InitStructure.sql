drop table if exists stockEtablissementLienSuccession;
drop table if exists stockEtablissementHistorique;
drop table if exists stockEtablissement;
drop table if exists stockUniteLegaleHistorique;
drop table if exists stockUniteLegale;

CREATE EXTENSION IF NOT EXISTS btree_gin;

create table stockEtablissementLiensSuccession (
siretEtablissementPredecesseur VARCHAR(14),
siretEtablissementSuccesseur VARCHAR(14),
dateLienSuccession TIMESTAMP,
transfertSiege BOOLEAN,
continuiteEconomique BOOLEAN,
dateDernierTraitementLienSuccession TIMESTAMP
);


create table stockEtablissementHistorique (
siren VARCHAR(9),
nic VARCHAR(5),
siret VARCHAR(14),
dateFin DATE,
dateDebut DATE,
etatAdministratifEtablissement VARCHAR(1),
changementEtatAdministratifEtablissement BOOLEAN,
enseigne1Etablissement VARCHAR(50),
enseigne2Etablissement VARCHAR(50),
enseigne3Etablissement VARCHAR(50),
changementEnseigneEtablissement BOOLEAN,
denominationUsuelleEtablissement VARCHAR(100),
changementDenominationUsuelleEtablissement BOOLEAN,
activitePrincipaleEtablissement VARCHAR(6),
nomenclatureActivitePrincipaleEtablissement VARCHAR(8),
changementActivitePrincipaleEtablissement BOOLEAN,
caractereEmployeurEtablissement VARCHAR(1),
changementCaractereEmployeurEtablissement BOOLEAN
);

create table stockEtablissement(
siren VARCHAR(9),
nic VARCHAR(5),
siret VARCHAR(14),
statutDiffusionEtablissement VARCHAR(1),
dateCreationEtablissement DATE,
trancheEffectifsEtablissement VARCHAR(2),
anneeEffectifsEtablissement  INTEGER,
activitePrincipaleRegistreMetiersEtablissement VARCHAR(6),
dateDernierTraitementEtablissement DATE,
etablissementSiege BOOLEAN,
nombrePeriodesEtablissement INTEGER,
complementAdresseEtablissement VARCHAR(38),
numeroVoieEtablissement VARCHAR(4),
indiceRepetitionEtablissement VARCHAR(1),
typeVoieEtablissement VARCHAR(4),
libelleVoieEtablissement VARCHAR(100),
codePostalEtablissement VARCHAR(5),
libelleCommuneEtablissement VARCHAR(100),
libelleCommuneEtrangerEtablissement VARCHAR(100),
distributionSpecialeEtablissement VARCHAR(26),
codeCommuneEtablissement VARCHAR(5),
codeCedexEtablissement VARCHAR(9),
libelleCedexEtablissement VARCHAR(100),
codePaysEtrangerEtablissement VARCHAR(5),
libellePaysEtrangerEtablissement VARCHAR(100),
complementAdresse2Etablissement VARCHAR(38),
numeroVoie2Etablissement VARCHAR(4),
indiceRepetition2Etablissement VARCHAR(1),
typeVoie2Etablissement VARCHAR(4),
libelleVoie2Etablissement VARCHAR(100),
codePostal2Etablissement VARCHAR(5),
libelleCommune2Etablissement VARCHAR(100),
libelleCommune2EtrangerEtablissement VARCHAR(100),
distributionSpeciale2Etablissement VARCHAR(26),
codeCommune2Etablissement VARCHAR(5),
codeCedex2Etablissement VARCHAR(9),
libelleCedex2Etablissement VARCHAR(100),
codePaysEtranger2Etablissement VARCHAR(5),
libellePaysEtranger2Etablissement VARCHAR(100),
dateDebut DATE,
etatAdministratifEtablissement VARCHAR(1),
enseigne1Etablissement VARCHAR(50),
enseigne2Etablissement VARCHAR(50),
enseigne3Etablissement VARCHAR(50),
denominationUsuelleEtablissement VARCHAR(100),
activitePrincipaleEtablissement VARCHAR(6),
nomenclatureActivitePrincipaleEtablissement VARCHAR(8),
caractereEmployeurEtablissement VARCHAR(1)
);

create table stockUniteLegaleHistorique(
siren  VARCHAR(9),
dateFin DATE,
dateDebut DATE,
etatAdministratifUniteLegale VARCHAR(1),
changementEtatAdministratifUniteLegale BOOLEAN,
nomUniteLegale VARCHAR(100),
changementNomUniteLegale BOOLEAN,
nomUsageUniteLegale VARCHAR(100),
changementNomUsageUniteLegale BOOLEAN,
denominationUniteLegale VARCHAR(120),
changementDenominationUniteLegale BOOLEAN,
denominationUsuelle1UniteLegale VARCHAR(70),
denominationUsuelle2UniteLegale VARCHAR(70),
denominationUsuelle3UniteLegale VARCHAR(70),
changementDenominationUsuelleUniteLegale BOOLEAN,
categorieJuridiqueUniteLegale VARCHAR(4),
changementCategorieJuridiqueUniteLegale BOOLEAN,
activitePrincipaleUniteLegale VARCHAR(6),
nomenclatureActivitePrincipaleUniteLegale VARCHAR(8),
changementActivitePrincipaleUniteLegale BOOLEAN,
nicSiegeUniteLegale VARCHAR(5),
changementNicSiegeUniteLegale BOOLEAN,
economieSocialeSolidaireUniteLegale VARCHAR(1),
changementEconomieSocialeSolidaireUniteLegale BOOLEAN,
caractereEmployeurUniteLegale VARCHAR(1),
changementCaractereEmployeurUniteLegale BOOLEAN
);

create table stockUniteLegale(
siren VARCHAR(9),
statutDiffusionUniteLegale VARCHAR(1),
unitePurgeeUniteLegale VARCHAR(5),
dateCreationUniteLegale DATE,
sigleUniteLegale VARCHAR(20),
sexeUniteLegale VARCHAR(1),
prenom1UniteLegale VARCHAR(20),
prenom2UniteLegale VARCHAR(20),
prenom3UniteLegale VARCHAR(20),
prenom4UniteLegale VARCHAR(20),
prenomUsuelUniteLegale VARCHAR(20),
pseudonymeUniteLegale VARCHAR(100),
identifiantAssociationUniteLegale VARCHAR(10),
trancheEffectifsUniteLegale VARCHAR(2),
anneeEffectifsUniteLegale INTEGER,
dateDernierTraitementUniteLegale DATE,
nombrePeriodesUniteLegale INTEGER,
categorieEntreprise VARCHAR(3),
anneeCategorieEntreprise INTEGER,
dateDebut DATE,
etatAdministratifUniteLegale VARCHAR(1),
nomUniteLegale VARCHAR(100),
nomUsageUniteLegale VARCHAR(100),
denominationUniteLegale VARCHAR(120),
denominationUsuelle1UniteLegale VARCHAR(70),
denominationUsuelle2UniteLegale VARCHAR(70),
denominationUsuelle3UniteLegale VARCHAR(70),
categorieJuridiqueUniteLegale VARCHAR(4),
activitePrincipaleUniteLegale VARCHAR(6),
nomenclatureActivitePrincipaleUniteLegale VARCHAR(8),
nicSiegeUniteLegale VARCHAR(5),
economieSocialeSolidaireUniteLegale VARCHAR(1),
caractereEmployeurUniteLegale VARCHAR(1)
);